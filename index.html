<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>FindTheBrain</title>
        <link rel="stylesheet" type="text/css" href="https://fonts.iu.edu/style.css?family=BentonSans:bold">
        <link rel="stylesheet" type="text/css" href="https://fonts.iu.edu/style.css?family=BentonSans:regular">
        <style>body{margin:auto;}</style>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="Description" content="How far are you from the #iubrain?">
    </head>
    <body>
    </body>
    <script src="vendor/elm.js"></script>
    <script type="text/javascript">

// declare a port with (definitely wrong) default values
const defaultLat = 91.0;
const defaultLon = 181.0;
var g = Elm.fullscreen(Elm.WhereBrain, {geo:{lat:defaultLat,lon:defaultLon}});

navigator.geolocation.watchPosition(geoSuccess,geoError);

// success callback
function geoSuccess(p) {
    var la = p.coords.latitude || defaultLat;
    var lo = p.coords.longitude || defaultLon;
    g.ports.geo.send({lat:la,lon:lo});
}

// error callback
function geoError(e) {
    console.log ('Geolocation error: ' + e.code + ' ( ' + e.message + ' ) ');
}

    </script>
</html>
